<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>project</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 10px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


</head>

<body>

<h2 id="toc_0">OpenStreetMap Data Case Study</h2>

<p><strong>Author: <a href="http://kevinvo.xyz">Kevin Vo</a></strong></p>

<h3 id="toc_1">Map Area</h3>

<p><a href="https://en.wikipedia.org/wiki/San_Jose,_California">San Jose, CA, USA</a></p>

<p><a href="https://mapzen.com/data/metro-extracts/">Dataset</a> contains information for San Jose Area. I&rsquo;m curious to see the map contribution of San Jose, which is my hometown.</p>

<h3 id="toc_2">Main Procedure to identify Problems in the Map</h3>

<ul>
<li>Since the the original file <code>sanjose.osm</code> is 600 MB, which is very large to view, I use <code>sample_region.py</code> to subset data.(This is the hint that Udacity provide). The new subset is stored in <code>sample.osm</code>, which is about 4MB (Set k = 100, it means pick every 100th top level element).</li>
<li>It is hard to use <code>less</code> command in Unix to view file. So I switch to use Sublime Text to view data.</li>
<li>Codes in <code>audit.py</code> are used to view and fix street names, phone numbers and postal codes.</li>
<li>Run <code>process_osm</code> to clean data and export necessary information into CSV files( processed with schema in <code>schema.py</code>).</li>
<li>Choose a smaller k value to get a bigger <code>sample.osm</code> file. Then modify <code>audit.py</code> to be able to screen and audit more cases.</li>
</ul>

<h3 id="toc_3">Problems Encountered In the Map</h3>

<p><strong>Overabbreviated and Inconsistent street names:</strong> some street types and directions are abbreviated such as <code>St, Rd, Ave, Blvd, Cir, Ln, Ct</code> or <code>1st, 2nd,.... 10th</code></p>

<p>For example: <code>N 1st St.</code> should be changed to <code>North First Street</code></p>

<p>However, if I change <code>1st</code> to <code>First</code>, the road names are not consistent when I figured that there are some road names such as <code>13th Street</code> or <code>128th Street</code>. So I think instead of changing from <code>1st</code> to <code>First</code>, I will change <code>First</code> to <code>1st</code>.</p>

<div><pre class="line-numbers"><code class="language-python">street_type_re = re.compile(r&#39;\b\S+\.?$&#39;, re.IGNORECASE)
expected = [&quot;Street&quot;, &quot;Avenue&quot;, &quot;Boulevard&quot;, &quot;Drive&quot;, &quot;Court&quot;, &quot;Place&quot;, &quot;Square&quot;, &quot;Lane&quot;, &quot;Road&quot;,
            &quot;Trail&quot;, &quot;Parkway&quot;, &quot;Commons&quot;, &quot;Circle&quot;, &quot;Crescent&quot;, &quot;Gate&quot;, &quot;Terrace&quot;, &quot;Grove&quot;, &quot;Way&quot;]

mapping = {
            &quot;St&quot;: &quot;Street&quot;,
            &quot;St.&quot;: &quot;Street&quot;,
            ...
            &quot;W.&quot;: &quot;West&quot;,
            &quot;W&quot;: &quot;West&quot;
          }


word_number_mapping = {
                     &quot;First&quot;: &quot;1st&quot;,
                     &quot;first&quot;: &quot;1st&quot;,
                     ...
                     &quot;ninth&quot;: &quot;9th&quot;,
                     &quot;Tenth&quot;: &quot;10th&quot;,
                     &quot;tenth&quot;: &quot;10th&quot;
                   }</code></pre></div>

<p>I have not fixed extreme cases such as <code>(408) 738-CHEF</code> or placing website address in phone number. Fortunately, there are very few extreme cases in this data.</p>

<p><strong>Incorrect phone number format:</strong></p>

<p>Convert phone number to correct format: <code>+1 (408)###-####</code> (in fact, beside 408, 699 is another phone area code for San Jose,CA. However, I have not seen. For example:</p>

<p><code>+1 408 123 4567</code> to <code>+1 (408)123-4567</code></p>

<p><code>+1 408-123-4567</code> to <code>+1 (408)123-4567</code></p>

<p><code>408.123.4567</code> to <code>+1 (408)123-4567</code></p>

<p><code>408.123-4567</code> to <code>+1 (408)123-4567</code></p>

<p><code>123-4567</code> to <code>+1 (408)123-4567</code></p>

<p>First of all, I have to remove special characters such as <code>+1</code>, <code>-</code>, <code>()</code>, whitespace, <code>.</code> or <code>+</code> from phone number.</p>

<div><pre class="line-numbers"><code class="language-python">phone_num = re.sub(&quot;\+1&quot;, &quot;&quot;, phone_num)
phone_num = re.sub(&quot;-&quot;, &quot;&quot;, phone_num)
phone_num = re.sub(&quot;[()]&quot;, &quot;&quot;, phone_num)
phone_num = re.sub(&quot;\s&quot;, &quot;&quot;, phone_num)
phone_num = re.sub(&quot;\\.&quot;, &quot;&quot;, phone_num)
phone_num = re.sub(&quot;\\+&quot;, &quot;&quot;, phone_num)</code></pre></div>

<p>Now most of phone numbers do not contain special chracters. We can check whether it is 7 digits long, 10 digits long or 11 digits long.</p>

<div><pre class="line-numbers"><code class="language-python">PHONE_7_NUM = re.compile(r&#39;^\d{7}$&#39;)
PHONE_10_NUM = re.compile(r&#39;^\d{10}$&#39;)
PHONE_11_NUM = re.compile(r&#39;^\d{11}$&#39;)</code></pre></div>

<p>Based on each case, we can modify phone number to standard format <code>+1 (408)###-####</code></p>

<p><strong>Incorrect postal code format:</strong></p>

<p>Convert postal code to correct format: <code>CA #####</code> or <code>CA #####-####</code>. </p>

<p>I have used regular expression to classify all these cases:</p>

<div><pre class="line-numbers"><code class="language-python">POSTCODE = re.compile(r&#39;^\d{5}$|\d{5}-\d{4}$&#39;)</code></pre></div>

<p>If postal code are not 5-digits number or 9-digits number, it will be classified as wrong postal code then will be excluded from our data.</p>

<p>For example: these are excluded from our data</p>

<div><pre class="line-numbers"><code class="language-none">WRONG POSTAL CODE: 95014-218
WRONG POSTAL CODE: 95014-321
WRONG POSTAL CODE: 9404</code></pre></div>

<h3 id="toc_4">Data Overview</h3>

<p>This section contains basic statistics about San Jose OpenStreetMap dataset and the SQL queries used to gather them.</p>

<h5 id="toc_5">File sizes</h5>

<div><pre class="line-numbers"><code class="language-none">sample.osm          237 MB
sanjose.db          117.3 MB
nodes.csv           90.7 MB
nodes_tags.csv      1.7 MB
ways.csv            8.1 MB
ways_nodes.cv       30.1 MB
ways_tags.csv       14.3 MB</code></pre></div>

<h5 id="toc_6">Number of nodes</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT COUNT(*) FROM Nodes;</code></pre></div>

<p>1048575</p>

<h5 id="toc_7">Number of ways</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT COUNT(*) FROM Ways;</code></pre></div>

<p>136514</p>

<h5 id="toc_8">Average number of nodes per day</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT ROUND(number_of_nodes/(max_day - min_day)) AS average_nodes_per_day
        FROM (SELECT COUNT(*) AS number_of_nodes,
                julianday(MAX(timestamp)) AS max_day,
                julianday(MIN(timestamp)) AS min_day
                FROM Nodes);</code></pre></div>

<p>285.0</p>

<h4 id="toc_9">Users:</h4>

<h5 id="toc_10">Number of unique users</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT COUNT(DISTINCT(ListOfUserId.uid))
        FROM (SELECT uid 
                FROM Nodes UNION ALL 
                    SELECT uid 
                    FROM Ways) ListOfUserId;</code></pre></div>

<p>1399</p>

<h5 id="toc_11">Top 5 contributing users</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT ListOfUser.user, COUNT(*) as num
        FROM (SELECT user FROM Nodes 
                UNION ALL SELECT user FROM Ways) ListOfUser
        GROUP BY ListOfUser.user
        ORDER BY num DESC
        LIMIT 5;</code></pre></div>

<div><pre class="line-numbers"><code class="language-none">nmixter,182215
andygol,113211
mk408,100515
karitotp,62823
RichRico,57426</code></pre></div>

<h5 id="toc_12">First contributor</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT user, timestamp FROM Nodes 
                UNION ALL SELECT user, timestamp From Ways
        ORDER BY timestamp
        LIMIT 1;</code></pre></div>

<p>mikelmaron,2007-03-08T02:02:46Z</p>

<h5 id="toc_13">Number of Contributions by Year</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT strftime(&#39;%Y&#39;, timestamp) AS year, count(*)
        FROM Nodes
        GROUP BY year;</code></pre></div>

<div><pre class="line-numbers"><code class="language-none">2007,78
2008,11366
2009,49405
2010,103494
2011,59975
2012,39351
2013,57133
2014,100063
2015,241547
2016,266813
2017,119350</code></pre></div>

<h4 id="toc_14">Places To Eat:</h4>

<h4 id="toc_15">Most popular cuisine</h4>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT nodesTags.value, COUNT(*) as num
        FROM nodesTags
            JOIN (SELECT DISTINCT(id) FROM nodesTags WHERE value=&#39;restaurant&#39;) GetRestaurantId
            ON nodesTags.id = GetRestaurantId.id
        WHERE nodesTags.key = &#39;cuisine&#39;
        GROUP BY nodesTags.value
        ORDER BY num DESC
        LIMIT 10;</code></pre></div>

<div><pre class="line-numbers"><code class="language-none">chinese,42
vietnamese,34
pizza,33
mexican,32
japanese,21
indian,18
italian,15
american,14
thai,14
sushi,12</code></pre></div>

<h4 id="toc_16">Coffee:</h4>

<h5 id="toc_17">Number of Cafe stores</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT COUNT(*) FROM nodesTags WHERE value = &#39;cafe&#39;;</code></pre></div>

<p>143</p>

<h5 id="toc_18">Number of Starbucks</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT COUNT(*) FROM nodesTags WHERE value LIKE &#39;%Starbucks%&#39;;</code></pre></div>

<p>50</p>

<p><img src="https://s-media-cache-ak0.pinimg.com/originals/5b/4d/a8/5b4da89d0dd9972da7921faf53540897.jpg" alt="Starbuck Store"></p>

<h4 id="toc_19">Banking:</h4>

<h5 id="toc_20">5 Most popular bank</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT nodesTags.value, COUNT(*) as num
        FROM nodesTags
            JOIN (SELECT DISTINCT(id) 
                    FROM nodesTags 
                    WHERE value=&#39;bank&#39;) GetBankId
            ON nodesTags.id=GetBankId.id
        WHERE nodesTags.key=&#39;name&#39;
        GROUP BY nodesTags.value
        ORDER BY num DESC
        LIMIT 5;</code></pre></div>

<div><pre class="line-numbers"><code class="language-none">Chase,12
&quot;Bank of America&quot;,9
&quot;Wells Fargo&quot;,7
Citibank,4
&quot;US Bank&quot;,2</code></pre></div>

<p><img src="https://chase.archinetonline.com/images/chase_login_600_300.jpg" alt="Chase Bank"></p>

<h4 id="toc_21">Religion:</h4>

<h5 id="toc_22">Number of Place of Worship for each religion</h5>

<div><pre class="line-numbers"><code class="language-sql">sqlite&gt; SELECT nodesTags.value, COUNT(*) as num
        FROM nodesTags
            JOIN (SELECT DISTINCT(id) FROM nodesTags WHERE value=&#39;place_of_worship&#39;) GetPlaceOfWorshipId
            ON nodesTags.id=GetPlaceOfWorshipId.id
        WHERE nodesTags.key=&#39;religion&#39;
        GROUP BY nodesTags.value
        ORDER BY num DESC;</code></pre></div>

<div><pre class="line-numbers"><code class="language-none">christian,108
buddhist,1
caodaism,1
jewish,1
rosicrucian,1
shinto,1
zoroastrian,1</code></pre></div>

<h3 id="toc_23">Data Improvement Ideas:</h3>

<h5 id="toc_24">The number of node tags:</h5>

<div><pre class="line-numbers"><code class="language-none">SELECT COUNT(DISTINCT(id)) FROM nodesTags;</code></pre></div>

<p>21206</p>

<h5 id="toc_25">The number of parking for disabled people:</h5>

<div><pre class="line-numbers"><code class="language-none">SELECT COUNT(*) FROM nodesTags
WHERE key = &#39;disabled&#39; AND value = &#39;yes&#39;;</code></pre></div>

<p>5</p>

<p>Therefore the percentage of node tags with disabled parking information is 5/21206 * 100% = <strong>0.024%</strong>. This number is surprisingly low.</p>

<p>I have tried to find city government data to improve the dataset. However, <strong><a href="http://data.sanjoseca.gov/dataviews/231073/parking-garage-data/">Data SanJose</a></strong> only contains parking information of some parking garages in dowtown of the city.</p>

<p>Another problem is lack of awareness about OpenStreetMaps. Do San Jose people and business owners know that OSM exist? Do they know that they can add data by themselves? And do they know it is free?<br>
For this issue, we can ask friends or create facebook group that can raise awareness to join <strong><a href="https://www.hotosm.org/get-involved">Humanitarian OpenStreetMap Team</a></strong> to improve dataset, escially for disabled parking.</p>

<h3 id="toc_26">Conclusion</h3>

<p>San Jose is a small town but its dataset is quite large. Therefore it is impossible to clean all the mess inside San Jose CA OpenStreetMap data. However, I believe the dataset is sufficiently cleaned in this project. Most street types abbreviation are replaced by more approriate street type without abbreviation. Phone number and postal code are handled nicely in the format of <code>+1 (408)###-####</code> and <code>CA ##### or CA #####-####</code> respectively. Via SQL query, I learned a few new things about my hometown. Throughout this project I have a great time learning how to clean data with python and SQL. However, my code still take nearly 30 minutes to handle 200MB osm file. Faster processing is the next approach I have to achieve for this project.</p>



<script type="text/x-mathjax-config">
(function () {

MathJax.Hub.Config({
	'showProcessingMessages': false,
	'messageStyle': 'none'
});

if (typeof MathJaxListener !== 'undefined') {
	MathJax.Hub.Register.StartupHook('End', function () {
		MathJaxListener.invokeCallbackForKey_('End');
	});
}

})();
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>

</html>
